<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blfire | Private Chat</title>
    <style>
        :root {
            --bg: #050505;
            --surface: #111111;
            --surface-hover: #1a1a1a;
            --accent: #ffffff;
            --accent-dim: #888888;
            --border: rgba(255, 255, 255, 0.1);
            --glass: rgba(255, 255, 255, 0.03);
            --fire: #ff4d00; /* Subtle orange highlight for 'Blfire' theme */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', -apple-system, sans-serif; }
        body { background-color: var(--bg); color: var(--accent); height: 100vh; overflow: hidden; }

        /* --- Login Screen --- */
        #login-screen {
            position: fixed; inset: 0; background: var(--bg);
            display: flex; align-items: center; justify-content: center; z-index: 1000;
        }
        .login-card {
            text-align: center; border: 1px solid var(--border);
            padding: 3rem; border-radius: 20px; background: var(--surface);
            box-shadow: 0 20px 50px rgba(0,0,0,0.8); width: 350px;
        }
        .login-card h1 { 
            font-weight: 800; 
            letter-spacing: 2px; 
            margin-bottom: 0.5rem; 
            font-size: 2.8rem; 
            text-transform: uppercase;
            background: linear-gradient(to bottom, #fff, #666);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* --- Main App Layout --- */
        #app-container { display: none; height: 100vh; grid-template-columns: 280px 1fr; }

        /* Sidebar */
        .sidebar { background: var(--surface); border-right: 1px solid var(--border); display: flex; flex-direction: column; }
        .sidebar-header { padding: 2rem 1.5rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .sidebar-header h2 { font-size: 0.9rem; font-weight: 700; letter-spacing: 2px; color: var(--accent-dim); text-transform: uppercase; }

        .group-list { flex: 1; overflow-y: auto; padding: 1rem; }
        .group-item {
            padding: 0.8rem 1rem; border-radius: 12px; margin-bottom: 0.4rem;
            cursor: pointer; transition: 0.2s; display: flex; align-items: center;
            gap: 12px; border: 1px solid transparent;
        }
        .group-item:hover { background: var(--surface-hover); border-color: var(--border); }
        .group-item.active { background: var(--accent); color: var(--bg); font-weight: 600; }
        .group-icon-small { width: 32px; height: 32px; border-radius: 8px; background: #222; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; border: 1px solid var(--border); }

        /* User Bar */
        .user-bar { padding: 1rem; border-top: 1px solid var(--border); background: var(--glass); display: flex; align-items: center; gap: 12px; }
        .user-pfp { width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--border); background-size: cover; background-color: #222; }
        .user-details { flex: 1; min-width: 0; }
        .user-details p { font-size: 0.9rem; font-weight: 600; }
        .user-details span { font-size: 0.7rem; color: var(--accent-dim); font-family: monospace; }

        /* Chat Area */
        .chat-main { display: flex; flex-direction: column; background: var(--bg); }
        .chat-header { padding: 1.5rem 2rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .messages { flex: 1; overflow-y: auto; padding: 2rem; display: flex; flex-direction: column; gap: 1.5rem; }

        /* Message Style */
        .msg-row { display: flex; gap: 1rem; max-width: 85%; }
        .msg-pfp { width: 36px; height: 36px; border-radius: 10px; background: #222; background-size: cover; flex-shrink: 0; border: 1px solid var(--border); }
        .msg-bubble { background: var(--glass); padding: 0.8rem 1.2rem; border-radius: 0 16px 16px 16px; border: 1px solid var(--border); }
        .msg-info { font-size: 0.75rem; color: var(--accent-dim); margin-bottom: 4px; }
        .msg-info b { color: var(--accent); }
        .msg-text { font-size: 0.95rem; line-height: 1.5; color: #eee; }

        /* Input Area */
        .input-container { padding: 2rem; }
        .input-wrapper { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 0.3rem 1.5rem; display: flex; align-items: center; transition: 0.3s; }
        .input-wrapper:focus-within { border-color: var(--accent); box-shadow: 0 0 15px rgba(255,255,255,0.05); }
        input[type="text"] { flex: 1; background: transparent; border: none; color: white; padding: 1rem 0; outline: none; font-size: 1rem; }

        /* Modals */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); display: none; align-items: center; justify-content: center; z-index: 2000; }
        .modal { background: var(--surface); border: 1px solid var(--border); width: 400px; border-radius: 24px; padding: 2.5rem; }
        .btn { width: 100%; padding: 1rem; border-radius: 12px; cursor: pointer; font-weight: 700; border: none; margin-top: 10px; text-transform: uppercase; letter-spacing: 1px; transition: 0.2s; }
        .btn-main { background: var(--accent); color: var(--bg); }
        .btn-main:hover { transform: translateY(-2px); opacity: 0.9; }
        .btn-ghost { background: transparent; color: var(--accent-dim); }
        .field { margin-bottom: 1.2rem; }
        .field label { display: block; font-size: 0.65rem; color: var(--accent-dim); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 1px; }
        .field input { width: 100%; background: var(--bg); border: 1px solid var(--border); color: white; padding: 0.9rem; border-radius: 10px; outline: none; transition: 0.2s; }
        .field input:focus { border-color: var(--accent); }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <h1>Blfire</h1>
            <p style="color: var(--accent-dim); margin-bottom: 2.5rem; font-size: 0.8rem; letter-spacing: 1px;">ENCRYPTED CHAT INTERFACE</p>
            <button class="btn btn-main" onclick="mockLogin()">Initialize Session</button>
        </div>
    </div>

    <div id="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Channels</h2>
                <span style="cursor:pointer; font-size: 1.2rem; color: var(--accent-dim);" onclick="openModal('group-modal')">＋</span>
            </div>
            <div class="group-list" id="group-list">
                <div class="group-item active">
                    <div class="group-icon-small">B</div>
                    <span>Blfire Main</span>
                </div>
            </div>
            <div class="user-bar">
                <div id="u-pfp" class="user-pfp" style="background-image: url('https://api.dicebear.com/7.x/shapes/svg?seed=Blfire')"></div>
                <div class="user-details">
                    <p id="u-name">Initializing...</p>
                    <span id="u-id">#ID-PENDING</span>
                </div>
                <div style="cursor:pointer; opacity: 0.5;" onclick="openModal('settings-modal')">⊙</div>
            </div>
        </aside>

        <main class="chat-main">
            <header class="chat-header">
                <h2 id="active-group-name">Blfire Main</h2>
                <span id="active-group-code" style="font-family: monospace; color: var(--accent-dim); font-size: 0.8rem;">CODE: //STABLE_PREVIEW</span>
            </header>
            
            <div class="messages" id="chat-box">
                <div class="msg-row">
                    <div class="msg-pfp"></div>
                    <div class="msg-bubble">
                        <div class="msg-info"><b>System</b> • Today</div>
                        <div class="msg-text">Secure connection established. Welcome to <b>Blfire</b>.</div>
                    </div>
                </div>
            </div>

            <div class="input-container">
                <div class="input-wrapper">
                    <input type="text" id="msg-input" placeholder="Transmit message..." maxlength="200" autocomplete="off">
                </div>
                <p style="font-size: 0.65rem; color: #333; margin-top: 10px; text-align: center; letter-spacing: 1px;">200 CHAR MAX | 2.0s INTERVAL</p>
            </div>
        </main>
    </div>

    <div class="overlay" id="group-modal">
        <div class="modal">
            <h3 style="margin-bottom: 1.5rem; letter-spacing: 1px;">NETWORK ACCESS</h3>
            <div class="field"><label>Access Code</label><input type="text" id="join-code" placeholder="xxxx-xxxx"></div>
            <button class="btn btn-main" onclick="closeModals()">Join Channel</button>
            <div style="height: 1px; background: var(--border); margin: 2rem 0;"></div>
            <div class="field"><label>New Channel Name</label><input type="text" id="create-name" placeholder="Channel-X"></div>
            <button class="btn btn-main" onclick="closeModals()">Create Channel</button>
            <button class="btn btn-ghost" onclick="closeModals()">Cancel</button>
        </div>
    </div>

    <div class="overlay" id="settings-modal">
        <div class="modal">
            <h3 style="margin-bottom: 1.5rem; letter-spacing: 1px;">IDENTITY OVERRIDE</h3>
            <div class="field"><label>Username (3-20 Chars)</label><input type="text" id="set-name" maxlength="20"></div>
            <div class="field"><label>Avatar URL</label><input type="text" id="set-pfp" placeholder="https://..."></div>
            <button class="btn btn-main" onclick="saveProfile()">Apply Changes</button>
            <button class="btn btn-ghost" onclick="closeModals()">Discard</button>
        </div>
    </div>

    <script>
        let lastMsgTime = 0;
        let userData = {
            name: "Bl-User",
            pfp: "https://api.dicebear.com/7.x/shapes/svg?seed=Blfire",
            id: Math.floor(1000 + Math.random() * 9000)
        };

        function mockLogin() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('app-container').style.display = 'grid';
            document.getElementById('set-name').value = userData.name;
            document.getElementById('set-pfp').value = userData.pfp;
            document.getElementById('u-name').innerText = userData.name;
            document.getElementById('u-id').innerText = '#' + userData.id;
            document.getElementById('u-pfp').style.backgroundImage = `url('${userData.pfp}')`;
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModals() { document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none'); }

        function saveProfile() {
            const newName = document.getElementById('set-name').value.trim();
            if(newName.length < 3 || newName.length > 20) {
                alert("Username must be 3-20 characters.");
                return;
            }
            userData.name = newName;
            userData.pfp = document.getElementById('set-pfp').value;
            document.getElementById('u-name').innerText = userData.name;
            document.getElementById('u-pfp').style.backgroundImage = `url('${userData.pfp}')`;
            closeModals();
        }

        document.getElementById('msg-input').addEventListener('keypress', e => {
            if (e.key === 'Enter') send();
        });

        function send() {
            const input = document.getElementById('msg-input');
            const text = input.value.trim();
            const now = Date.now();

            if (!text) return;
            if (now - lastMsgTime < 2000) {
                alert("RATE LIMIT: Please wait 2 seconds between transmissions.");
                return;
            }

            const chatBox = document.getElementById('chat-box');
            const msgHtml = `
                <div class="msg-row">
                    <div class="msg-pfp" style="background-image: url('${userData.pfp}')"></div>
                    <div class="msg-bubble">
                        <div class="msg-info"><b>${userData.name}</b> • ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                        <div class="msg-text">${text}</div>
                    </div>
                </div>
            `;
            chatBox.insertAdjacentHTML('beforeend', msgHtml);
            input.value = '';
            chatBox.scrollTop = chatBox.scrollHeight;
            lastMsgTime = now;
        }
    </script>
</body>
</html>
